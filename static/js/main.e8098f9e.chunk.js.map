{"version":3,"sources":["StateProvider.js","components/HeaderComponent/HeaderComponent.js","components/ProductComponent/ProductComponent.js","components/HomeComponent/HomeComponent.js","components/SubtotalComponent/SubtotalComponent.js","components/CheckoutProduct/CheckoutProduct.js","components/CheckoutComponent/CheckoutComponent.js","firebase.js","axios.js","components/CheckoutPayment/CheckoutPayment.js","components/LoginComponent/LoginComponent.js","OrderComp/OrderComp.js","Orders/Orders.js","App.js","serviceWorker.js","reducer.js","index.js"],"names":["StateContext","createContext","StateProvider","reducer","initialState","children","Provider","value","useReducer","useStateValue","useContext","HeaderComponent","ProductComponent","id","title","rating","imgs","price","dispatch","basket","className","Array","fill","map","_","i","src","onClick","type","item","image","HomeComponent","SubtotalComponent","state","totalPrice","b","history","useHistory","renderText","Fragment","length","decimalScale","displayType","thousandSeperator","perfix","e","push","CheckoutProduct","hideButton","console","log","CheckoutComponent","user","email","key","db","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","instance","axios","create","baseUrl","CheckoutPayment","stripe","useStripe","elements","useElements","useState","error","setError","disabled","setDisabled","processing","setProcessing","succeeded","setSucceeded","clientSecret","setClientSecret","useEffect","a","method","url","response","data","getClientSecret","handleSubmit","event","preventDefault","confirmCardPayment","payment_method","card","getElement","CardElement","then","paymentIntent","collection","doc","uid","set","amount","created","replace","Date","items","onSubmit","onChange","empty","message","LoginComponent","setEmail","password","setPassword","to","target","signInWithEmailAndPassword","catch","createUserWithEmailAndPassword","alert","OrderComp","order","moment","unix","format","Orders","orders","setOrders","orderBy","onSnapshot","snapshot","docs","promise","loadStripe","App","onAuthStateChanged","authUser","path","Boolean","window","location","hostname","match","action","index","findIndex","basketItem","newBasket","splice","warn","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e8098f9e.chunk.js","sourcesContent":["import React, {createContext , useContext ,useReducer} from \"react\";\n\nexport const StateContext = createContext();\n\n//Wrap app and provide data layer\nexport const StateProvider = ({reducer , initialState, children}) => (\n    <StateContext.Provider value={useReducer(reducer,initialState)} >\n    {children}\n    </StateContext.Provider>\n    );\n\n    //pull info from data layer\nexport const useStateValue = () => useContext(StateContext);","import React from 'react';\nimport './HeaderComponent.css'\nimport ShoppingBasketIcon from '@material-ui/icons/ShoppingBasket';\nimport { Link } from 'react-router-dom';\nimport { useStateValue } from '../../StateProvider';\nimport { auth } from 'firebase';\n\nconst HeaderComponent = () => {\n  const [state,dispatch] = useStateValue();\n  const handleAuthentication=() =>{\n    if(state.user){\n      auth().signOut();\n    }\n  }\n  return(\n           // BEM Convention\n    <div className=\"header\">\n      <div className=\"header__nav\">\n      <div className=\"header__search\">\n        <Link to=\"/\">\n          <img\n          className=\"header__logo\"\n          src=\"https://cdn.logo.com/hotlink-ok/logo-social.png\"\n          />\n        </Link>  \n          <input\n          className=\"header__searchInput\" type=\"text\" placeholder=\"Search\"/>\n        </div>\n        <Link to={!state.user && \"/login\"}> \n            <div onClick={handleAuthentication} className=\"header__component\">\n              <span className=\"header__optionLineOne\">\n              Hello {state.user?state.user.email:\"Guest\"}\n              </span>\n              <span className=\"header__optionLineTwo\">\n      {state.user?'Sign Out' : 'Sign In'}\n              </span>\n            </div>\n        </Link>\n        <Link to=\"/orders\">\n          <div className=\"header__component\">\n          <span className=\"header__optionLineOne\">\n              Return\n            </span>\n            <span className=\"header__optionLineTwo\">\n              Order\n            </span>\n          </div>\n        </Link>\n        <div className=\"header__component\">\n        <span className=\"header__optionLineOne\">\n            Run\n          </span>\n          <span className=\"header__optionLineTwo\">\n            Prime\n          </span>\n        </div>\n\n        <div className=\"header__component\">\n       <Link to=\"/checkout\"><ShoppingBasketIcon/> \n  <div className=\"header__BasketCount\">{state.basket?.length}</div>\n       </Link>\n       </div>\n      </div>\n  </div>\n    )\n}\n\nexport default HeaderComponent;\n","import React from 'react'\nimport './ProductComponent.css'\nimport { useStateValue } from '../../StateProvider'\n\nexport default function ProductComponent({id,title,rating,imgs,price}) {\n    const [{basket},dispatch] = useStateValue();\n\n    const addToBasket =() =>{\n    dispatch({\n        type:\"ADD_TO_BASKET\",\n        item:{\n            id:id,\n            title:title,\n            image:imgs,\n            price:price,\n            rating:rating,\n        },\n    });\n  }\n    return (\n        <div className=\"product\">\n            <div className=\"product__info\">\n                <p>{title}</p>\n                <p className=\"product__price\"> \n                <small>$</small>\n                <strong>{price}</strong> \n                </p>\n                <div className=\"product__rating\">\n                   {Array(rating).fill().map((_,i) => (\n                       <p>⭐</p>\n                   ))}\n                    \n                </div>\n                <img src={imgs} />\n            \n                <button onClick={addToBasket}>Add To Basket</button>\n            </div>            \n        </div>\n    )\n}\n","import React from 'react'\nimport './HomeComponent.css'\nimport ProductComponent from '../ProductComponent/ProductComponent'\nconst HomeComponent = () =>{\n    return(\n        <div className=\"home\">\n            <div className=\"home_container\">\n                <img className=\"home__image\" src=\"https://images.unsplash.com/photo-1506765515384-028b60a970df?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1049&q=80\" />\n            </div>\n\n            <div className=\"home__row\">\n            <ProductComponent\n            id={1}\n            title=\"Harry Poter and Chamber of Secrets\"\n            rating={5}\n            imgs=\"https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1499277281l/5.jpg\"\n            price={5.00}\n            />\n            <ProductComponent\n            id={2}\n            title=\"Harry Poter and Goblet of Fire\"\n            rating={4}\n            imgs=\"https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1499277281l/5.jpg\"\n            price={4.50}\n            />\n            </div>\n            <div className=\"home__row\">\n            <ProductComponent\n            id={3}\n            title=\"The Hitchhikers guide to galaxy\"\n            rating={3}\n            imgs=\"https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1499277281l/5.jpg\"\n            price={6.70}\n            />\n            <ProductComponent\n            id={1}\n            title=\"Harry Poter and Chamber of Secrets\"\n            rating={5}\n            imgs=\"https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1499277281l/5.jpg\"\n            price={5.00}\n            />\n            <ProductComponent\n            id={3}\n            title=\"Harry Poter and Chamber of Secrets\"\n            rating={5}\n            imgs=\"https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1499277281l/5.jpg\"\n            price={5.00}\n            />\n            </div>\n            <div className=\"home__row\">\n            <ProductComponent\n             id={3}\n             title=\"Harry Poter and Chamber of Secrets\"\n             rating={5}\n             imgs=\"https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1499277281l/5.jpg\"\n             price={5.00}\n             />\n\n            </div>\n\n\n        </div>\n    )\n}\n\nexport default HomeComponent;","import React from 'react'\nimport './SubtotalComponent.css'\nimport CurrencyFormat from 'react-currency-format'\nimport { Button } from '@material-ui/core'\nimport { useStateValue } from '../../StateProvider'\nimport { useHistory } from 'react-router-dom'\nexport default function SubtotalComponent() {\n    const [state,dispatch] = useStateValue();\n    let totalPrice = 0 ;\n    state.basket.map(b =>{\n        totalPrice += b[\"price\"];\n    })\n    const history = useHistory();\n    \n    return (\n        <div className=\"subtotal\"> \n            <CurrencyFormat\n            renderText={(value) => (\n                <React.Fragment>\n                    <p>\n                        Subtotal ({state.basket?.length} items) : <strong>{totalPrice}</strong>\n                    </p>\n                    <small className=\"suntotal__gift\">\n                        <input type=\"checkbox\"/>This Order Contains a Gift\n                    </small>\n                </React.Fragment>\n            )}\n            decimalScale={2}\n            value={totalPrice}\n            displayType = {\"text\"}\n            thousandSeperator = {true}\n            perfix={\"$\"}\n            />\n            <button onClick={e=> history.push('./payment')}>Proceed To Checkout</button>\n        </div>\n    );\n}\n","import React from 'react'\nimport './CheckoutProduct.css'\nimport { useStateValue } from '../../StateProvider'\nimport FlipMove from 'react-flip-move'\nexport default function CheckoutProduct({id,imgs,title,price,rating,hideButton}) {\n    const [{basket},dispatch] = useStateValue();\n\n\n    const removeFromBasket=() =>{\n        dispatch({\n            type: 'REMOVE_FROM_BASKET',\n            id:id,\n        })\n}\n    return (\n     \n            <div className=\"checkoutProduct\">\n                {console.log(id,imgs,title,price,rating)}\n                <img className=\"checkoutProduct__image\" src={imgs}/>\n\n                <div className=\"checkoutProduct__info\">\n                    <p className=\"checkoutProduct__title\">{title}</p>\n                    <p className=\"checkoutProduct__price\">\n                        <small>$</small>\n                        <strong>{price}</strong>\n                    </p>\n                    <div className=\"checkoutProduct__rating\">\n                        {Array(rating).fill().map((_,i)=><p>⭐</p>)}\n                    </div>\n                    {!hideButton && \n                        <button onClick={removeFromBasket}> Remove</button>\n                    }\n                 </div>\n            </div>\n       \n    )\n}\n","import React from 'react'\nimport './CheckoutComponent.css'\nimport SubtotalComponent from '../SubtotalComponent/SubtotalComponent'\nimport { useStateValue } from '../../StateProvider'\nimport CheckoutProduct from '../CheckoutProduct/CheckoutProduct'\nimport FlipMove from 'react-flip-move'\nexport default function CheckoutComponent() {\n   const [{basket,user},dispatch] = useStateValue();\n    return (\n        <div className=\"checkout\">\n            <div className=\"checkout__left\">\n                <img className=\".checkout__ad\"\n                src=\"\" />\n                    <div>\n                        <h3>Hello, {user? user.email:\"Guest\"} </h3>\n                        <h2 className=\"checkout__title\">Your Shopping Basket</h2>\n                        {/* <FlipMove> */}\n                            {\n                                basket.map((item,i)=>(\n                                    <CheckoutProduct\n                                        key={i}\n                                        id={item[\"id\"]}\n                                        title = {item[\"title\"]}\n                                        rating={item[\"rating\"]}\n                                        imgs={item[\"image\"]}\n                                        price={item[\"price\"]}\n                                    />\n                                    )\n                                )\n                            }\n                        {/* </FlipMove> */}\n                    </div>\n             </div>\n                    <div className=\"checkout__right\">  \n                        <SubtotalComponent/>\n                    </div>\n            \n        </div>\n    )\n}\n","import firebase from 'firebase';\n\nvar firebaseConfig = {\n    apiKey: \"AIzaSyDMBxmB570zoKQlikkXz2uXeoD_MyXvcPM\",\n    authDomain: \"e-commerce-39de8.firebaseapp.com\",\n    databaseURL: \"https://e-commerce-39de8.firebaseio.com\",\n    projectId: \"e-commerce-39de8\",\n    storageBucket: \"e-commerce-39de8.appspot.com\",\n    messagingSenderId: \"569559037126\",\n    appId: \"1:569559037126:web:e52d10aa2c1f29100d13c7\",\n    measurementId: \"G-VCVBC7YEGX\"\n};\n  // Initialize Firebase\n\n  const firebaseApp =  firebase.initializeApp(firebaseConfig);\n  const db = firebaseApp.firestore();\n  const auth = firebase.auth();\n\n  export {db,auth};","import axios from \"axios\";\n\nconst instance = axios.create({\n    baseUrl: 'http://localhost:5001/e-commerce-39de8/us-central1/api'  //The Cloud Function\n});\n\nexport default instance;","import React, { useState,useEffect } from 'react'\nimport './CheckoutPayment.css'\nimport {db} from '../../firebase'\nimport { useStateValue } from '../../StateProvider'\nimport CheckoutProduct from '../CheckoutProduct/CheckoutProduct';\nimport { Link, useHistory } from 'react-router-dom';\nimport {CardElement,useStripe, useElements} from '@stripe/react-stripe-js'\nimport CurrencyFormat from 'react-currency-format';\nimport axios from '../../axios';\n\n\nfunction CheckoutPayment() {\n    const history = useHistory();\n    const stripe = useStripe();\n    const elements = useElements();\n    const [{basket,user},dispatch] = useStateValue();\n    const [error,setError] = useState(null);\n    const [disabled,setDisabled] = useState(false);\n    const [processing,setProcessing] = useState(false);\n    const [succeeded,setSucceeded] = useState(false);\n    const [clientSecret,setClientSecret] = useState(true);\n \n    \n    \n    let totalPrice = 0 ;\n    basket.map(b =>{\n        totalPrice += b[\"price\"];\n    })\n\n\n    useEffect(() => {\n        const getClientSecret = async () => {\n            const response= await axios({\n                method: 'post',\n                url: `http://localhost:5001/e-commerce-39de8/us-central1/api/payments/create?total=${totalPrice * 100}`\n            });\n            setClientSecret(response.data.clientSecret);\n        }\n\n        getClientSecret();\n    }, [basket])\n\n    const handleSubmit = async (event) => {\n        console.log(clientSecret)\n        // do all the fancy stripe stuff...\n        event.preventDefault();\n        setProcessing(true);\n        try{\n        const payload = await stripe.confirmCardPayment(clientSecret, {\n            payment_method: {\n                card: elements.getElement(CardElement)\n            }\n        }).then(({ paymentIntent }) => {\n            // paymentIntent = payment confirmation\n            db\n              .collection('users')\n              .doc(user?.uid)\n              .collection('orders')\n              .doc(paymentIntent.id)\n              .set({\n                  basket: basket,\n                  amount: paymentIntent.amount,\n                  created: paymentIntent.created\n              })\n\n              \n            setSucceeded(true);\n            setError(null)\n            setProcessing(false)\n\n            dispatch({\n                type: 'EMPTY_BASKET'\n            })\n\n            history.replace('/orders')\n        })\n    }\n    catch(err){\n\n        console.log(err)\n        db\n              .collection('users')\n              .doc(user?.uid)\n              .collection('orders')\n              .doc(Date())\n              .set({\n                  basket: basket,\n                  amount: totalPrice,\n                  created: Date(),\n              })\n\n              \n            setSucceeded(true);\n            setError(null)\n            setProcessing(false)\n\n            dispatch({\n                type: 'EMPTY_BASKET'\n            })\n\n            history.replace('/orders')\n    }\n\n\n    }\n\n    const handleChange= e =>{\n\n        setDisabled(e.empty);\n        setError(e.error ? e.message : \" \")\n    }\n\n\n \n \n\n\n    return (\n        <div className=\"payment\">\n            <div className=\"payment__container\">\n                {/* Payment Section - dilevery address */}\n                <h1>\n                    Checkout (\n                        {/* <Link to=\"/checkout\">{basket?.length items}</Link> */}\n                    )\n                </h1>\n                <div className=\"payment__section\">\n                    <div className=\"payment__title\">\n                        <h3>Delivery Adress</h3>\n                    </div>\n                    <div className=\"payment__address\">\n                        <p>{user?user.email:\"Guest\"}</p>\n                        <p>43,Privet Drive</p>\n                        <p>The Wizarding World</p>\n                    </div>\n                </div>\n\n                {/* Payment Section - Review Items */}\n                <div className=\"payment__section\">\n                    <div className=\"payment__title\">\n                        <h3>Review Items And Delivery</h3>\n                    </div>\n                    <div className=\"payment__items\">\n                        {\n                            basket.map((items,i) => (\n                            <CheckoutProduct\n                            key={i}\n                            id = {items.id}\n                            title = {items.title}\n                            imgs={items.image}\n                            price={items.price}\n                            rating={items.rating}\n                            />\n                            ) )\n\n                        }\n                    </div>\n                </div>\n\n                {/* Payment Section - Payment Method */}\n            \n                <div className=\"payment__section\">\n                    <div className=\"payment__title\">\n                        <h3>Payment Details</h3>\n                    </div>\n                    <div className=\"payment__details\">\n\n                       <form onSubmit={handleSubmit}>\n                           <CardElement onChange={handleChange} /> \n                     \n                            <div className=\"payment__priceContainer\">\n                            <CurrencyFormat\n            renderText={(value) => (\n                <React.Fragment>\n                    <h3>\n                        Order Total: {value}\n                    </h3>\n                </React.Fragment>\n            )}\n            decimalScale={2}\n            value={totalPrice}\n            displayType = {\"text\"}\n            thousandSeperator = {true}\n            perfix={\"$\"}\n            />\n            <button disabled={processing || disabled || succeeded}>\n            <span>{processing ? <p>Processing</p> : \"Buy Now\"}</span>\n            </button>\n                            </div>\n\n                            {error && <div>{error}</div>}\n                       </form>\n\n                    </div>\n                </div>\n\n            </div>\n        </div>\n    )\n}\n\nexport default CheckoutPayment\n","import React, { useState } from 'react'\nimport './LoginComponent.css'\nimport { Link,useHistory } from 'react-router-dom'\nimport { auth } from 'firebase';\n\nfunction LoginComponent() {\n    const history = useHistory();\n    const [email,setEmail] = useState('');\n    const [password,setPassword] = useState('');\n\n    const signIn= (e) =>{\n        e.preventDefault();\n        //Login\n        auth().\n            signInWithEmailAndPassword(email,password)\n            .then(user =>{\n                history.push(\"/\")\n            })\n            .catch(error => console.log(error))\n            \n\n    }\n\n    const signUp= (e) =>{\n        e.preventDefault();\n        //Register\n        auth()\n        .createUserWithEmailAndPassword(email,password)\n        .then((user) => {//user === auth\n            console.log(user)\n            if(user){\n                history.push('/')\n            }\n        }).catch(error => alert(\"error\"))\n            \n    }\n    \n    return (\n        \n\n        <div className=\"login\">\n            <Link to=\"/\">\n                <img \n                className=\"login__logo\"\n                src=\"https://www.humanrightslogo.net/sites/default/files/HRLogoCMYKsmallRGB.png\"/>\n            </Link>\n\n            <div className=\"login__container\">\n                <h1>Sign-In</h1>\n                <form>\n                    <h5>Email : </h5>\n                    <input value={email} onChange={e=>setEmail(e.target.value)} type=\"text\" />\n\n                    <h5>Password : </h5>\n                    <input value={password} onChange={e=>setPassword(e.target.value)} type=\"password\" />\n\n                    <button onClick={signIn} className=\"login__signinButton\">Sign In</button>\n                </form>\n                <p>By Signing in you agree that you're Awesome.</p>\n                <button onClick={signUp} className=\"login__registerButton\">Create Your Account</button>\n            </div>\n\n        </div>\n    )\n}\n\nexport default LoginComponent\n","import React from 'react'\nimport './OrderComp.css'\nimport moment from 'moment'\nimport CheckoutProduct from '../components/CheckoutProduct/CheckoutProduct'\n\n\nfunction OrderComp({order}) {\n    return (\n        <div className=\"orderComp\"> \n            <h2>Order</h2>\n            <p>{moment.unix(order.data.created).format(\"MMMM Do YYYY, h:mma\")} </p>            \n            <p className=\"order__id\">\n                <small>{order.id}</small>\n            </p>\n            {order.data.basket?.map(item => (\n                <CheckoutProduct\n                id = {item.id}\n                title = {item.title}\n                rating ={item.rating}\n                imgs={item.image}\n                price={item.price}\n                />\n            ))}\n        </div>\n\n    )\n}\n\n export default OrderComp\n","import React, { useState, useEffect } from 'react'\nimport './Orders.css'\nimport { db } from '../firebase';\nimport OrderComp from '../OrderComp/OrderComp'\nimport { useStateValue } from '../StateProvider';\n\n\nfunction Orders() {\n    const [orders,setOrders] = useState([]);\n    const [{basket,user},dispatch] = useStateValue()\n    useEffect(() => {\n        if(user){\n            db\n            .collection('users')\n            .doc(user?.uid)\n            .collection('orders')\n            .orderBy('created','desc')\n            .onSnapshot(snapshot => {\n                setOrders(snapshot.docs.map(doc => ({\n                    id:doc.id,\n                    data:doc.data()\n                })))\n            })\n    \n        }\n        else{\n            setOrders([])\n        }\n    },[user])\n    return (\n        <div className=\"orders\">\n            <h1>Your Orders</h1>\n\n            <div className=\"orders__order\">\n                {orders?.map(order => (\n                    <OrderComp order={order}/>\n                ))}\n            </div>\n        </div>\n    )\n}\n\nexport default Orders\n","import React,{useEffect} from 'react';\nimport './App.css';\nimport HeaderComponent from './components/HeaderComponent/HeaderComponent';\nimport HomeComponent from './components/HomeComponent/HomeComponent'\nimport CheckoutComponent from './components/CheckoutComponent/CheckoutComponent'\nimport {BrowserRouter as Router,Switch,Route} from 'react-router-dom'\nimport CheckoutPayment from './components/CheckoutPayment/CheckoutPayment';\nimport LoginComponent from './components/LoginComponent/LoginComponent';\nimport { auth } from './firebase';\nimport { useStateValue } from './StateProvider';\nimport {loadStripe} from '@stripe/stripe-js'\nimport {Elements} from '@stripe/react-stripe-js'\nimport Orders from './Orders/Orders';\n\nconst promise = loadStripe(\n  \"pk_test_51HPvTlAjOMRbAmPkJYurzpFfln91kYehReicDEkCDvKBmbANDmaZHDPK4Nz64F8MPCV9cxf9zXoFhOPGJ41IGqDu00yAw7oziK\"\n);\n\nfunction App() {\n  const [state,dispatch] = useStateValue();\n  useEffect(() => {\n   \n    auth.onAuthStateChanged(authUser => {\n      console.log(\"The USer is   \",authUser)\n      \n      if(authUser){\n        //The User Just Logged in / The user was logged in\n        dispatch({\n          type:'SET_USER',\n          user:authUser,\n        })\n      }else{\n        //The User is Logged Out\n        dispatch({\n          type:'SET_USER',\n          user:null,\n        })\n      }\n    })\n  }, [])\n\n  return (\n    <Router>\n      <React.Fragment>\n        <Switch>\n        <Route path=\"/login\" >\n          <LoginComponent/>\n        </Route>\n       \n        <Route path=\"/payment\" >\n        <HeaderComponent/>\n        <Elements stripe={promise}>\n          <CheckoutPayment/>\n        </Elements>\n        </Route>\n       \n       <Route path=\"/checkout\" >\n          <HeaderComponent/>\n            <CheckoutComponent/>\n       </Route>\n\n       <Route path=\"/orders\">\n          <HeaderComponent/>\n            <Orders/>\n       </Route>\n\n      <Route path=\"/\">\n          <HeaderComponent/>\n            <HomeComponent/>\n       </Route>\n    \n        </Switch>\n      </React.Fragment>\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","export const initialState = {\n    basket: [],\n    user: null,\n};\n\n//Selector\n// export const getBasketTotal = (basket) =>{\n//     basket?.reduce((amount,item) => item.price+amount,0);\n// }\n\nconst reducer = (state, action) => {\n    console.log(state);\n    switch(action.type) {\n        case 'ADD_TO_BASKET':\n            return {\n                ...state,\n                basket: [...state.basket, action.item]\n            };\n\n        case 'REMOVE_FROM_BASKET':\n            const index = state.basket.findIndex(\n                (basketItem) => basketItem.id === action.id\n            );            \n            let newBasket = [...state.basket];\n            if(index >= 0){\n                newBasket.splice(index,1)\n            }\n            else{\n                console.warn(\"Cant Remove SHIT!\")\n            }\n\n            return {...state,\n                basket:newBasket}\n\n            case \"SET_USER\":\n                return{\n                    ...state,\n                    user:action.user\n                }\n            case \"EMPTY_BASKET\":\n                return{\n                    ...state,\n                    basket:[]\n                }\n        default:\n            return  state\n    }\n};\n\nexport default reducer;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport reducer,{initialState} from './reducer'\nimport {StateProvider} from './StateProvider'\nReactDOM.render(\n  <React.StrictMode>\n    <StateProvider reducer={reducer}  initialState={initialState} > \n      <App />\n    </StateProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}